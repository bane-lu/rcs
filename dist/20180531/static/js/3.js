webpackJsonp([3],{"72x0":function(t,e,n){n("7XU4"),t.exports=n("AKd3").Object.keys},"7XU4":function(t,e,n){var i=n("OXaN"),a=n("5pnV");n("t+Om")("keys",function(){return function(t){return a(i(t))}})},BlAy:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("ZLEe"),a=n.n(i),o=(n("E4LH"),{props:{to_app_type:{type:Array}},data:function(){return{on_submit_loading:!1,visible:!1,versionOptions:[],dataForm:{exist:[],existVersion:"",newVersion:null},dataRule:{}}},computed:{newOS:function(){return this.dataForm.os.join(",")}},mounted:function(){},methods:{init:function(){var t=this;this.visible=!0,this.$nextTick(function(){t.get_version_type(),t.$refs.dataForm.resetFields(),t.dataForm.exist=[],t.dataForm.newVersion=""})},get_version_type:function(){var t=this;this.$http({url:this.$http.adornUrl("/manager/versioninf/getAppOsVersionList"),method:"get",data:this.$http.adornParams()}).then(function(e){var n=[];e.data.appOsVersionList.forEach(function(t,e){var i={};i.value=a()(t)[0],i.label=a()(t)[0],i.children=[{},{}],i.children[0].value="android",i.children[0].label="android";var o=t[i.label][0];if(o.android.length){var s=[];o.android.forEach(function(t,e){var n={};n.value=t,n.label=t,s.push(n)}),i.children[0].children=s}i.children[1].value="iphone",i.children[1].label="iphone";var r=t[i.label][1];if(r.iphone.length){s=[];r.iphone.forEach(function(t,e){var n={};n.value=t,n.label=t,s.push(n)}),i.children[1].children=s}n.push(i)}),t.versionOptions=n}).catch(function(){})},versionHandleChange:function(t){console.log(t),this.dataForm.exist.length<3&&(this.$message({message:"请选择正确的版本号",type:"warning"}),this.dataForm.exist=[])},dataFormSubmit:function(){var t=this;this.$refs.dataForm.validate(function(e){e&&(t.on_submit_loading=!0,t.$http({url:t.$http.adornUrl("/manager/versioninf/copyasnew"),method:"post",data:t.$http.adornData({existApp:t.dataForm.exist[0],existOS:t.dataForm.exist[1],existVersion:t.dataForm.exist[2],newVersion:t.dataForm.newVersion})}).then(function(e){var n=e.data;n&&0===n.code?t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){t.visible=!1,t.on_submit_loading=!1,t.$emit("refreshDataList")}}):(t.$message.error(n.msg),t.on_submit_loading=!1)}).catch(function(){t.on_submit_loading=!1}))})}}}),s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-dialog",{attrs:{id:"copy-panel",title:"复制新增","close-on-click-modal":!1,visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[n("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRule,"label-width":"80px"},nativeOn:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.dataFormSubmit()}}},[n("el-form-item",{attrs:{label:"☆"}},[n("span",{staticClass:"title"},[t._v("请选择您要复制的版本号信息")])]),t._v(" "),t.isAuth("manager:versioninf:getAppOsVersionList")?n("el-form-item",{attrs:{label:"",props:"exist"}},[n("el-cascader",{attrs:{options:t.versionOptions},on:{change:t.versionHandleChange},model:{value:t.dataForm.exist,callback:function(e){t.$set(t.dataForm,"exist",e)},expression:"dataForm.exist"}})],1):t._e(),t._v(" "),n("el-form-item",{attrs:{label:"☆"}},[n("span",{staticClass:"title"},[t._v("请输入您要创建的版本号")])]),t._v(" "),n("el-form-item",{attrs:{label:"",prop:"newVersion"}},[n("el-input",{attrs:{placeholder:"新的版本号",maxlength:"20"},model:{value:t.dataForm.newVersion,callback:function(e){t.$set(t.dataForm,"newVersion",e)},expression:"dataForm.newVersion"}})],1)],1),t._v(" "),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary",loading:t.on_submit_loading},on:{click:function(e){t.dataFormSubmit()}}},[t._v("确定")])],1)],1)},staticRenderFns:[]};var r=n("46Yf")(o,s,!1,function(t){n("CUK4")},null,null);e.default=r.exports},CUK4:function(t,e,n){var i=n("MROs");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);n("XkoO")("29be0ec8",i,!0)},MROs:function(t,e,n){(t.exports=n("acE3")(!1)).push([t.i,"\n#copy-panel .el-form-item__content {\n  line-height: 40px;\n  position: relative;\n  font-size: 18px;\n  color: #999;\n}\n",""])},ZLEe:function(t,e,n){t.exports={default:n("72x0"),__esModule:!0}},"t+Om":function(t,e,n){var i=n("FITv"),a=n("AKd3"),o=n("BRDz");t.exports=function(t,e){var n=(a.Object||{})[t]||Object[t],s={};s[t]=e(n),i(i.S+i.F*o(function(){n(1)}),"Object",s)}}});