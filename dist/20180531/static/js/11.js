webpackJsonp([11],{YwCS:function(a,t,e){var r=e("ZfVC");"string"==typeof r&&(r=[[a.i,r,""]]),r.locals&&(a.exports=r.locals);e("XkoO")("0dc838f3",r,!0)},ZfVC:function(a,t,e){(a.exports=e("acE3")(!1)).push([a.i,"\n.el-form-item__label[data-v-677f8ddd] {\n  width: 126px;\n}\n.reddot[data-v-677f8ddd] {\n  width: 70%;\n}\n.redFlag_tip[data-v-677f8ddd] {\n  color: #999;\n  font-size: 12px;\n}\n",""])},h7dz:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e("E4LH"),o={data:function(){var a=this,t=function(t,e,r){a.timeCheck?r():r(new Error("起止时间间隔须为24小时以上"))},e=function(t,e,r){a.docTimeCheck?r():r(new Error("文案起止时间间隔须为24小时以上"))};return{app_type:[],on_submit_loading:!1,visible:!1,isEditable:!1,version_type:[],dataForm:{createTime:"",id:"",app:"",appId:"",urlName:"",url:"",version:"",description:"",redFlag:"",adCode:"",minTime:"",maxTime:"",docFlag:!0,docContent:"",docRule:"",docMinTime:"",docMaxTime:"",shareTitle:"",shareContent:"",shareDetails:"",os:["android","iphone"]},androidStatus:!1,iosStatus:!1,timeCheck:!1,docTimeCheck:!1,dataRule:{app:[{required:!0,message:"请选择APP",trigger:"blur"}],urlName:[{required:!0,message:"请输入urlName",trigger:"blur"},{validator:function(a,t,e){Object(r.c)(t)?e():e(new Error("只能输入英文"))},trigger:"blur"}],url:[{required:!0,message:"请输入url地址不能为空",trigger:"blur"},{validator:function(a,t,e){Object(r.f)(t)?e():e(new Error("url格式错误"))},trigger:"blur"}],version:[{required:!0,message:"请输入版本号",trigger:"blur"},{validator:function(a,t,e){Object(r.h)(t)?e():e(new Error("版本格式错误（如:2.4.3)"))},trigger:"blur"}],minTime:[{required:!0,message:"请选择开始时间",trigger:"blur"},{validator:t,trigger:"blur"}],maxTime:[{required:!0,message:"请选择结束时间",trigger:"blur"},{validator:t,trigger:"blur"}],adCode:[{required:!0,message:"请输入识别码",trigger:"blur"},{validator:function(a,t,e){Object(r.e)(t)?e():e(new Error("识别码格式错误（如:20180606)"))},trigger:"blur"}],docContent:[{required:!0,message:"请输入文案文字",trigger:"blur"}],docRule:[{required:!0,message:"请选择展示规则",trigger:"blur"}],docMinTime:[{required:!0,message:"请选择文案开始时间",trigger:"blur"},{validator:e,trigger:"blur"}],docMaxTime:[{required:!0,message:"请选择文案结束时间",trigger:"blur"},{validator:e,trigger:"blur"}],shareTitle:[{required:!1,message:"请输入文案标题",trigger:"blur"}],shareContent:[{required:!1,message:"请输入文案内容",trigger:"blur"}],shareDetails:[{required:!1,message:"请输入文案详情",trigger:"blur"}],os:[{required:!0,message:"请选择系统",trigger:"blur"}]}}},watch:{app:function(){this.dataForm.version="",this.get_version_type(this.dataForm.app,this.newOS)},os:function(){this.dataForm.version="",this.get_version_type(this.dataForm.app,this.newOS)}},computed:{newOS:function(){return this.dataForm.os.join(",")},newDocFlag:function(){return this.dataForm.docFlag?1:0},app:function(){return this.dataForm.app},os:function(){return this.dataForm.os}},created:function(){this.get_app_type()},mounted:function(){},methods:{url_input:function(){this.dataForm.url=this.dataForm.url.replace(/\s+/g,"")},redDot_input:function(){},init:function(a){var t=this;this.visible=!0,this.on_submit_loading=!1,this.androidStatus=!1,this.iosStatus=!1,this.$nextTick(function(){t.$refs.dataForm.resetFields(),a?(t.dataForm.id=a.id,t.$http({url:t.$http.adornUrl("/manager/url/info/"+t.dataForm.id),method:"get"}).then(function(a){var e=a.data;if(e&&0===e.code){console.log(e.url),t.dataForm.createTime=e.url.createTime,t.dataForm.app=e.url.app,t.dataForm.appId=e.url.managerVersionInfoId,t.dataForm.urlName=e.url.urlName,t.dataForm.url=e.url.url,t.dataForm.version=e.url.version,t.dataForm.description=e.url.description,t.dataForm.redFlag=e.url.redFlag,t.dataForm.adCode=e.url.adCode,t.dataForm.minTime=e.url.minTime,t.dataForm.maxTime=e.url.maxTime,t.timeCheck=!0,1==e.url.docFlag?(t.dataForm.docFlag=!0,t.docTimeCheck=!0):(t.dataForm.docFlag=!1,t.docTimeCheck=!1),t.dataForm.docContent=e.url.docContent,t.dataForm.docRule=e.url.docRule,t.dataForm.docMinTime=e.url.docMinTime,t.dataForm.docMaxTime=e.url.docMaxTime,t.dataForm.shareTitle=e.url.shareTitle,t.dataForm.shareContent=e.url.shareContent,t.dataForm.shareDetails=e.url.shareDetails,t.dataForm.os=e.url.os.split(",");var r=t;t.dataForm.os.forEach(function(a,t){"android"==a?r.androidStatus=!0:"iphone"==a&&(r.iosStatus=!0)})}}).catch(function(){})):(t.dataForm.createTime="",t.dataForm.id="",t.dataForm.app="",t.dataForm.urlName="",t.dataForm.url="",t.dataForm.appId="",t.dataForm.version="",t.dataForm.description="",t.dataForm.redFlag="",t.dataForm.adCode="",t.dataForm.minTime="",t.dataForm.maxTime="",t.dataForm.docFlag=!1,t.dataForm.docContent="",t.dataForm.docRule="",t.dataForm.docMinTime="",t.dataForm.docMaxTime="",t.dataForm.shareTitle="",t.dataForm.shareContent="",t.dataForm.shareDetails="",t.dataForm.os=["android","iphone"],t.androidStatus=!1,t.iosStatus=!1)})},dataFormSubmit:function(){var a=this;this.$refs.dataForm.validate(function(t){if(t){if(a.on_submit_loading=!0,""==a.dataForm.id){var e=a;a.app_type.forEach(function(a,t){a.app==e.dataForm.app&&(e.dataForm.appId=a.id),console.log(e.dataForm.appId)})}var r={createTime:a.dataForm.createTime,id:a.dataForm.id,app:a.dataForm.app,urlName:a.dataForm.urlName,url:a.dataForm.url,managerVersionInfoId:a.dataForm.appId,version:a.dataForm.version,description:a.dataForm.description,redFlag:a.dataForm.redFlag,adCode:a.dataForm.adCode,minTime:a.dataForm.minTime,maxTime:a.dataForm.maxTime,docFlag:a.newDocFlag,docContent:a.dataForm.docContent,docRule:a.dataForm.docRule,docMinTime:a.dataForm.docMinTime,docMaxTime:a.dataForm.docMaxTime,shareTitle:a.dataForm.shareTitle,shareContent:a.dataForm.shareContent,shareDetails:a.dataForm.shareDetails,os:a.newOS};a.$http({url:a.$http.adornUrl("/manager/url/"+(a.dataForm.id?"update":"save")),method:"post",data:a.$http.adornData(r)}).then(function(t){var e=t.data;e&&0===e.code?a.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){a.visible=!1,a.on_submit_loading=!1,a.$emit("refreshDataList")}}):(a.$message.error(e.msg),a.on_submit_loading=!1)}).catch(function(){a.on_submit_loading=!1})}})},showDocument:function(){console.log(this.dataForm.docFlag),this.dataForm.docFlag||(this.dataForm.docContent="",this.dataForm.docRule="",this.dataForm.docMinTime="",this.dataForm.docMaxTime="",this.dataForm.adCode="")},get_app_type:function(){var a=this;this.$http({url:this.$http.adornUrl("/manager/version/getList"),method:"get",data:this.$http.adornParams()}).then(function(t){var e=t.data;a.app_type=e.appList}).catch(function(){})},get_version_type:function(a,t){var e=this;this.$http({url:this.$http.adornUrl("/manager/versioninf/getVersionList"),method:"post",data:this.$http.adornData({app:a,os:t})}).then(function(a){var t=a.data;e.version_type=t.appVersionList}).catch(function(){})},transformTime:function(a){var t=Object(r.a)(this.dataForm.minTime,this.dataForm.maxTime,864e5);return this.timeCheck=!!t,a},transformDocTime:function(a){var t=Object(r.a)(this.dataForm.docMinTime,this.dataForm.docMaxTime,864e5);return this.docTimeCheck=!!t,a}}},i={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("el-dialog",{attrs:{title:a.dataForm.id?"编辑":"新增","close-on-click-modal":!1,visible:a.visible},on:{"update:visible":function(t){a.visible=t}}},[e("el-form",{ref:"dataForm",attrs:{model:a.dataForm,rules:a.dataRule,"label-width":"80px"},nativeOn:{keyup:function(t){if(!("button"in t)&&a._k(t.keyCode,"enter",13,t.key))return null;a.dataFormSubmit()}}},[e("el-row",{attrs:{gutter:30}},[e("el-col",{attrs:{span:12}},[e("div",{staticClass:"grid-content"},[e("el-form-item",{attrs:{label:"app",prop:"app","label-width":"100px"}},[e("el-select",{attrs:{placeholder:"请选择",disabled:""!=a.dataForm.id},model:{value:a.dataForm.app,callback:function(t){a.$set(a.dataForm,"app",t)},expression:"dataForm.app"}},a._l(a.app_type,function(t,r){return e("el-option",{key:r,attrs:{label:t.app,value:t.app}},[a._v(a._s(t.app))])}))],1)],1)]),a._v(" "),e("el-col",{attrs:{span:12}},[e("div",{staticClass:"grid-content"},[e("el-form-item",{attrs:{label:"系统选择",prop:"os","label-width":"100px"}},[e("el-checkbox-group",{model:{value:a.dataForm.os,callback:function(t){a.$set(a.dataForm,"os",t)},expression:"dataForm.os"}},[e("el-checkbox",{attrs:{label:"android",disabled:a.androidStatus}},[a._v("Android")]),a._v(" "),e("el-checkbox",{attrs:{label:"iphone",disabled:a.iosStatus}},[a._v("IOS")])],1)],1)],1)])],1),a._v(" "),e("el-form-item",{attrs:{label:"版本号",prop:"version","label-width":"100px"}},[e("el-select",{attrs:{placeholder:"请先选择版本号和系统"},model:{value:a.dataForm.version,callback:function(t){a.$set(a.dataForm,"version",t)},expression:"dataForm.version"}},a._l(a.version_type,function(t,r){return e("el-option",{key:r,attrs:{label:t.version,value:t.version}},[a._v(a._s(t.version))])}))],1),a._v(" "),e("el-form-item",{attrs:{label:"urlName",prop:"urlName","label-width":"100px"}},[e("el-input",{attrs:{placeholder:"urlName",maxlength:"64",disabled:""!=a.dataForm.id},model:{value:a.dataForm.urlName,callback:function(t){a.$set(a.dataForm,"urlName",t)},expression:"dataForm.urlName"}})],1),a._v(" "),e("el-form-item",{attrs:{label:"url",prop:"url","label-width":"100px"}},[e("el-input",{attrs:{placeholder:"请输入url",maxlength:"64"},on:{input:a.url_input},model:{value:a.dataForm.url,callback:function(t){a.$set(a.dataForm,"url",t)},expression:"dataForm.url"}})],1),a._v(" "),e("el-form-item",{attrs:{label:"添加描述",prop:"description","label-width":"100px"}},[e("el-input",{attrs:{placeholder:"请输入不超过20个字",maxlength:"20"},model:{value:a.dataForm.description,callback:function(t){a.$set(a.dataForm,"description",t)},expression:"dataForm.description"}})],1),a._v(" "),e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:10}},[e("div",{staticClass:"grid-content"},[e("el-form-item",{attrs:{label:"有效期选择",prop:"minTime","label-width":"100px"}},[e("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"开始时间",editable:a.isEditable},on:{change:a.transformTime},model:{value:a.dataForm.minTime,callback:function(t){a.$set(a.dataForm,"minTime",t)},expression:"dataForm.minTime"}})],1)],1)]),a._v(" "),e("el-col",{attrs:{span:10}},[e("div",{staticClass:"grid-content"},[e("el-form-item",{attrs:{label:"-",prop:"maxTime","label-width":"80px"}},[e("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"结束时间",editable:a.isEditable},on:{change:a.transformTime},model:{value:a.dataForm.maxTime,callback:function(t){a.$set(a.dataForm,"maxTime",t)},expression:"dataForm.maxTime"}})],1)],1)])],1),a._v(" "),e("el-form-item",{attrs:{label:"是否显示小红点","label-width":"110px"}},[e("el-input",{staticClass:"reddot",attrs:{placeholder:"是否显示小红点",maxlength:"8"},on:{input:a.redDot_input},model:{value:a.dataForm.redFlag,callback:function(t){a.$set(a.dataForm,"redFlag",t)},expression:"dataForm.redFlag"}}),a._v(" "),e("span",{staticClass:"redFlag_tip"},[a._v("8位数字（年月日）")])],1),a._v(" "),e("el-form-item",{attrs:{label:"文案展示","label-width":"100px"}},[e("el-checkbox",{on:{change:a.showDocument},model:{value:a.dataForm.docFlag,callback:function(t){a.$set(a.dataForm,"docFlag",t)},expression:"dataForm.docFlag"}},[a._v("需要")])],1),a._v(" "),a.dataForm.docFlag?e("el-form-item",{attrs:{label:"文案文字",prop:"docContent","label-width":"100px"}},[e("el-input",{attrs:{placeholder:"文案文字",maxlength:"20"},model:{value:a.dataForm.docContent,callback:function(t){a.$set(a.dataForm,"docContent",t)},expression:"dataForm.docContent"}})],1):a._e(),a._v(" "),a.dataForm.docFlag?e("el-form-item",{attrs:{label:"展示规则",prop:"docRule","label-width":"100px"}},[e("el-radio-group",{model:{value:a.dataForm.docRule,callback:function(t){a.$set(a.dataForm,"docRule",t)},expression:"dataForm.docRule"}},[e("el-radio",{attrs:{label:"0"}},[a._v("一直存在")]),a._v(" "),e("el-radio",{attrs:{label:"1"}},[a._v("点击后消失")])],1)],1):a._e(),a._v(" "),a.dataForm.docFlag?e("el-row",{attrs:{gutter:10}},[e("el-col",{attrs:{span:10}},[e("div",{staticClass:"grid-content"},[e("el-form-item",{attrs:{label:"展示时间",prop:"docMinTime","label-width":"100px"}},[e("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"文案开始时间",editable:a.isEditable},on:{change:a.transformDocTime},model:{value:a.dataForm.docMinTime,callback:function(t){a.$set(a.dataForm,"docMinTime",t)},expression:"dataForm.docMinTime"}})],1)],1)]),a._v(" "),e("el-col",{attrs:{span:10}},[e("div",{staticClass:"grid-content"},[e("el-form-item",{attrs:{label:"-",prop:"docMaxTime"}},[e("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"文案结束时间",editable:a.isEditable},on:{change:a.transformDocTime},model:{value:a.dataForm.docMaxTime,callback:function(t){a.$set(a.dataForm,"docMaxTime",t)},expression:"dataForm.docMaxTime"}})],1)],1)])],1):a._e(),a._v(" "),a.dataForm.docFlag?e("el-form-item",{attrs:{label:"识别码","label-width":"100px",prop:"adCode"}},[e("el-input",{staticClass:"reddot",attrs:{placeholder:"广告后台配置识别码",maxlength:"8"},model:{value:a.dataForm.adCode,callback:function(t){a.$set(a.dataForm,"adCode",t)},expression:"dataForm.adCode"}}),a._v(" "),e("span",{staticClass:"redFlag_tip"},[a._v("8位数字（年月日）")])],1):a._e(),a._v(" "),e("h3",[a._v("分享文案")]),a._v(" "),e("el-form-item",{attrs:{label:"标题",prop:"shareTitle","label-width":"100px"}},[e("el-input",{attrs:{type:"text",placeholder:"0/20",maxlength:"20"},model:{value:a.dataForm.shareTitle,callback:function(t){a.$set(a.dataForm,"shareTitle",t)},expression:"dataForm.shareTitle"}})],1),a._v(" "),e("el-form-item",{attrs:{label:"内容",prop:"shareContent","label-width":"100px"}},[e("el-input",{attrs:{placeholder:"0/30",maxlength:"30"},model:{value:a.dataForm.shareContent,callback:function(t){a.$set(a.dataForm,"shareContent",t)},expression:"dataForm.shareContent"}})],1),a._v(" "),e("el-form-item",{attrs:{label:"详情",prop:"shareDetails","label-width":"100px"}},[e("el-input",{attrs:{placeholder:"0/50",maxlength:"50"},model:{value:a.dataForm.shareDetails,callback:function(t){a.$set(a.dataForm,"shareDetails",t)},expression:"dataForm.shareDetails"}})],1)],1),a._v(" "),e("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(t){a.visible=!1}}},[a._v("取消")]),a._v(" "),e("el-button",{attrs:{type:"primary",loading:a.on_submit_loading},on:{click:function(t){a.dataFormSubmit()}}},[a._v("确定")])],1)],1)},staticRenderFns:[]};var d=e("46Yf")(o,i,!1,function(a){e("YwCS")},"data-v-677f8ddd",null);t.default=d.exports}});