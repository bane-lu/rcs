webpackJsonp([16],{"0UKN":function(e,t,r){(e.exports=r("acE3")(!1)).push([e.i,"\n#fullQuantity p[data-v-37211bb5] {\n  margin: 0;\n  padding: 0;\n  color: #909399;\n  font-size: 18px;\n  border-left: 4px solid #909399;\n  padding-left: 10px;\n  line-height: 22px;\n  margin-bottom: 28px;\n}\n#fullQuantity .formContent[data-v-37211bb5] {\n  width: 60%;\n}\n",""])},G5qm:function(e,t,r){var a=r("0UKN");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);r("XkoO")("98f7cfb8",a,!0)},rprm:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("MVSX"),o={data:function(){return{a:window.SITE_CONFIG.basePath+"/web-manager/iospush/pushMessageConf/numberFileUpload",pickerBeginDateBefore:{disabledDate:function(e){return e.getTime()<Date.now()-864e5}},form:{title:"",body:"",url:"",pushType:"0",date:"",fileList:"",numberTag:"",rangeVal:""},range:[],invalidNums:0,validNums:0,showDialog:!1,header:{token:a.default.cookie.get("token")},rules:{title:[{required:!0,message:"名称不能为空",trigger:"blur"}],body:[{required:!0,message:"模块不能为空",trigger:"blur"}],url:[{required:!0,message:"url不能为空",trigger:"blur"}],icon:[{required:!0,message:"未上传图片",trigger:"blur"}],date:[{required:!0,message:"有效时间不能为空",trigger:"blur"}]}}},methods:{submitUpload:function(){var e=this;this.$refs.form.validate(function(t){if(!t)return!1;console.log(1),e.$http({contentType:"application/json",url:e.$http.adornUrl("/iospush/pushMessageConf/createPushMessageConf"),method:"post",data:e.$http.adornData({title:e.form.title,body:e.form.body,url:e.form.url,pushType:e.form.pushType,pushStartDate:e.form.date[0],pushEndDate:e.form.date[1],numberTag:e.form.numberTag,province:e.form.rangeVal})}).then(function(t){var r=t.data;if(0!==r.code)return e.$message({type:"error",message:r.msg}),!1;e.form.fileList=[],e.form.rangeVal="",e.$router.replace({name:"MessagePush"}),e.showDialog=!1,e.$refs.form.resetFields()}).catch(function(){})})},cancel:function(){var e=this;this.$confirm("确定放弃已编写内容？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",center:!0}).then(function(){e.form.rangeVal="",e.$router.replace({name:"MessagePush"}),e.$refs.form.resetFields()}).catch(function(e){})},beforeAvatarUpload:function(e){var t="application/vnd.ms-excel"===e.type;return t||this.$message.error("上传文件只能是 csv 格式!"),t},fileSuccess:function(e){0===e.code?(this.form.numberTag=e.numberTag,this.validNums=e.validNums,this.invalidNums=e.invalidNums,this.showDialog=!0,this.$message({type:"success",message:"文件上传成功"})):this.$message({type:"error",message:e.msg})},fileRemove:function(){this.showDialog=!1}},mounted:function(){var e=this;this.$http({contentType:"application/json",url:this.$http.adornUrl("/iospush/pushMessageConf/getArea"),method:"get"}).then(function(t){var r=t.data;if(0!==r.code)return e.$message({type:"error",message:r.msg}),!1;e.range=r.data}).catch(function(){})}},s={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"fullQuantity"}},[r("p",[e._v(" 新增url")]),e._v(" "),r("div",{staticClass:"formContent"},[r("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px",rules:e.rules}},[r("el-form-item",{attrs:{label:"业务名称",prop:"title"}},[r("el-input",{attrs:{maxlength:"20"},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"模块",prop:"body"}},[r("el-input",{attrs:{type:"textarea",maxlength:"50"},model:{value:e.form.body,callback:function(t){e.$set(e.form,"body",t)},expression:"form.body"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"URL",prop:"url"}},[r("el-input",{model:{value:e.form.url,callback:function(t){e.$set(e.form,"url",t)},expression:"form.url"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"icon上传",prop:"fileList"}},[r("el-upload",{staticClass:"upload-demo",attrs:{action:"https://jsonplaceholder.typicode.com/posts/",limit:1,"file-list":e.form.fileList,"list-type":"picture"}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("选择icon")]),e._v(" "),r("span",[e._v("(尺寸1x 44*44px)")]),e._v(" "),r("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"有效时间",prop:"date"}},[r("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerBeginDateBefore},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"权限"}},[r("el-radio-group",{model:{value:e.form.pushType,callback:function(t){e.$set(e.form,"pushType",t)},expression:"form.pushType"}},[r("el-radio",{attrs:{label:"0"}},[e._v("需要统一认证")]),e._v(" "),r("el-radio",{attrs:{label:"1"}},[e._v("不需要统一认证")])],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.submitUpload}},[e._v("确认推送")]),e._v(" "),r("el-button",{on:{click:e.cancel}},[e._v("取消")])],1)],1)],1)])},staticRenderFns:[]};var i=r("46Yf")(o,s,!1,function(e){r("G5qm")},"data-v-37211bb5",null);t.default=i.exports}});